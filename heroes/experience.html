<!DOCTYPE html>
<html lang="ru">

<head>
    <meta charset="utf-8" />
    <title>Опыт</title>
    <link rel="stylesheet" type="text/css" href="/homm3_wiki/style.css">
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
    <script src="/homm3_wiki/js/scripts.js"></script>
</head>

<body>
    <div id="full">
        <header style="height:15em;">
            <!--<img src="/homm3_wiki/img/header.png" style="display:block;margin:auto;">-->
        </header>
        <main>
            <nav class="window_dark_blue">
            </nav>
            <div id="content" class="window_dark_blue">
                <h1>Опыт</h1>
                <p>Сила любого героя характеризуется его уровнем. Изначально при найме герои имеют 1 уровень и случайное количество опыта в пределах от 40 до 90 единиц. В процессе игры они могут повышать свой уровень, приобретая определённое количество очков опыта.</p>
                <p>Существует несколько различных способов, позволяющих повысить опыт героя:</p>
                <ol>
                    <li>Посещение объектов на карте приключений, предлагающих дополнительный опыт.</li>
                    <li>Проведение боёв с противниками, когда в случае победы ваш герой получает количество опыта, численно равное суммарной величине здоровья всех убитых существ плюс 500 опыта за поверженного героя, и плюс 500 опыта за взятие вражеского города. Если противник сбежал (или сдался) с поля боя, то суммарная величина здоровья оставшихся у него существ не учитывается и 500 очков опыта за победу над героем противника в этом случае также не начисляется. Воскрешённые существа и Клоны не учитываются.</li>
                    <li>Получение дополнительного опыта от вторичного навыка Обучения, добавляющего 5, 10 или 15% к величине получаемого опыта.</li>
                    <li>Если герой сдаётся/сбегает с поля боя, то он не получает опыт, даже если кого-то успел убить. Тот герой, от которого сбежал противник, получает опыт за убитых существ, но не получает опыт за побеждённого героя.</li>
                </ol>
                <p>Таблица соответствия уровня героя и количества опыта, которое необходимо для того, чтобы получить его:</p>
                <div style="display: inline-block; vertical-align: middle ;" class="window_nocorners">
                    <table>
                        <thead>
                            <tr>
                                <th>Уровень</th>
                                <th>Очки опыта</th>
                                <th>Уровень</th>
                                <th>Очки опыта</th>
                                <th>Уровень</th>
                                <th>Очки опыта</th>
                                <th>Уровень</th>
                                <th>Очки опыта</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td>1</td>
                                <td>-</td>
                                <td>26</td>
                                <td>240,714</td>
                                <td>51</td>
                                <td>22,770,702</td>
                                <td>100 (76)</td>
                                <td>2,073,739,175</td>
                            </tr>
                            <tr>
                                <td>2</td>
                                <td>1,000</td>
                                <td>27</td>
                                <td>288,451</td>
                                <td>52</td>
                                <td>27,324,424</td>
                                <td>108 (77)</td>
                                <td>2,099,639,276</td>
                            </tr>
                            <tr>
                                <td>3</td>
                                <td>2,000</td>
                                <td>28</td>
                                <td>345,735</td>
                                <td>53</td>
                                <td>32,788,890</td>
                                <td>868 (78)</td>
                                <td>2,144,641,867</td>
                            </tr>
                            <tr>
                                <td>4</td>
                                <td>3,200</td>
                                <td>29</td>
                                <td>414,475</td>
                                <td>54</td>
                                <td>39,346,249</td>
                                <td>3732 (79)</td>
                                <td>2,146,553,679</td>
                            </tr>
                            <tr>
                                <td>5</td>
                                <td>4,600</td>
                                <td>30</td>
                                <td>496,963</td>
                                <td>55</td>
                                <td>47,215,079</td>
                                <td>5920 (80)</td>
                                <td>2,146,673,313</td>
                            </tr>
                            <tr>
                                <td>6</td>
                                <td>6,200</td>
                                <td>31</td>
                                <td>595,948</td>
                                <td>56</td>
                                <td>56,657,657</td>
                                <td>6424 (81)</td>
                                <td>2,147,293,156</td>
                            </tr>
                            <tr>
                                <td>7</td>
                                <td>8,000</td>
                                <td>32</td>
                                <td>714,730</td>
                                <td>57</td>
                                <td>67,988,790</td>
                            </tr>
                            <tr>
                                <td>8</td>
                                <td>10,000</td>
                                <td>33</td>
                                <td>857,268</td>
                                <td>58</td>
                                <td>81,586,128</td>
                            </tr>
                            <tr>
                                <td>9</td>
                                <td>12,200</td>
                                <td>34</td>
                                <td>1,028,313</td>
                                <td>59</td>
                                <td>97,902,933</td>
                            </tr>
                            <tr>
                                <td>10</td>
                                <td>14,700</td>
                                <td>35</td>
                                <td>1,233,567</td>
                                <td>60</td>
                                <td>117,483,099</td>
                            </tr>
                            <tr>
                                <td>11</td>
                                <td>17,500</td>
                                <td>36</td>
                                <td>1,479,871</td>
                                <td>61</td>
                                <td>140,979,298</td>
                            </tr>
                            <tr>
                                <td>12</td>
                                <td>20,600</td>
                                <td>37</td>
                                <td>1,775,435</td>
                                <td>62</td>
                                <td>169,174,736</td>
                            </tr>
                            <tr>
                                <td>13*</td>
                                <td>24,320</td>
                                <td>38</td>
                                <td>2,139,111</td>
                                <td>63</td>
                                <td>203,009,261</td>
                            </tr>
                            <tr>
                                <td>14</td>
                                <td>28,784</td>
                                <td>39</td>
                                <td>2,555,722</td>
                                <td>64</td>
                                <td>243,610,691</td>
                            </tr>
                            <tr>
                                <td>15</td>
                                <td>34,140</td>
                                <td>40</td>
                                <td>3,066,455</td>
                                <td>65</td>
                                <td>292,332,407</td>
                            </tr>
                            <tr>
                                <td>16</td>
                                <td>40,567</td>
                                <td>41</td>
                                <td>3,679,334</td>
                                <td>66</td>
                                <td>350,798,466</td>
                            </tr>
                            <tr>
                                <td>17</td>
                                <td>48,279</td>
                                <td>42</td>
                                <td>4,414,788</td>
                                <td>67</td>
                                <td>420,957,736</td>
                            </tr>
                            <tr>
                                <td>18</td>
                                <td>57,533</td>
                                <td>43</td>
                                <td>5,287,332</td>
                                <td>68</td>
                                <td>505,148,860</td>
                            </tr>
                            <tr>
                                <td>19</td>
                                <td>68,637</td>
                                <td>44</td>
                                <td>6,356,384</td>
                                <td>69</td>
                                <td>606,178,208</td>
                            </tr>
                            <tr>
                                <td>20</td>
                                <td>81,961</td>
                                <td>45</td>
                                <td>7,627,246</td>
                                <td>70</td>
                                <td>727,413,425</td>
                            </tr>
                            <tr>
                                <td>21</td>
                                <td>97,949</td>
                                <td>46</td>
                                <td>9,152,280</td>
                                <td>71</td>
                                <td>872,895,685</td>
                            </tr>
                            <tr>
                                <td>22</td>
                                <td>117,134</td>
                                <td>47</td>
                                <td>10,982,320</td>
                                <td>72</td>
                                <td>1,047,474,397</td>
                            </tr>
                            <tr>
                                <td>23</td>
                                <td>140,156</td>
                                <td>48</td>
                                <td>13,178,368</td>
                                <td>73</td>
                                <td>1,256,968,851</td>
                            </tr>
                            <tr>
                                <td>24</td>
                                <td>167,782</td>
                                <td>49</td>
                                <td>15,813,625</td>
                                <td>74</td>
                                <td>1,508,362,195</td>
                            </tr>
                            <tr>
                                <td>25</td>
                                <td>200,933</td>
                                <td>50</td>
                                <td>18,975,933</td>
                                <td>88 (75)**</td>
                                <td>1,810,034,207</td>
                            </tr>
                        </tbody>
                    </table>
                </div>
                <p>* Начиная с 13 уровня прирост очков опыта увеличивается на 20% по отношению к предыдущему значению прироста, округление вниз.</p>
                <p>** При получении очередного 75 уровня герою сразу присваивается 88 уровень (баг в игре). Причём количество опыта остается на уровне 75, тем не менее все способности героя соответствуют уровню 88. Далее - все остальные скачки следуют совершенно бессистемно, причем разница между уровнями существенно снижается. Механизм расчёта ведет себя не стабильно - все зависит от суммы получаемой порции опыта - и при дальнейшем повышении опыта у героя станет либо отрицательное число очков опыта и уровень станет нулевым, т.е. ниже, чем на старте, либо расчёт зацикливается и предлагает герою в принципе бесконечную возможность повышения уровня. Однако, судя по всему, предел достаточно близок к указанному самому последнему значению (108). Так что его можно считать максимально достижимым корректным уровнем опыта в игре (реальное значение не будет превосходить намного).</p>
                <p>Немного информатики: в игре для таких величин, как сумма золота или опыт героя, выделяется 4 байта = 32 бита, поэтому максимальное число со знаком, вмещающееся в них, равно 2^31-1= 2147483647. Как только число достигнет этой величины, произойдет смена знака (в старшем разряде 0 сменится на 1, старший бит 16-битного значения компьютер интерпретирует как знаковый), т.е. числа от 32768 до 65535 считаются отрицательными и золото или опыт уйдут в минус.
                </p>
                <p>Для количества существ выделяется 2 байта и после 65535 произойдет сбой.
                </p>
                <p>Для уровня героя выделяется 1 байт и после 32767 произойдёт сбой.
                </p>
                <p> Древо знаний - объект на карте приключений, мгновенно повышающий уровень героя на 1. </p>
                <p>Правила работы Древа знаний:</p>
                <ol>
                    <li>До 75 уровня - древо дает герою опыт, равный разнице между количеством опыта, требуемым для достижения следующего уровня и текущего (не путать с текущим значением опыта героя, которое находится в промежутке между уровнями).
                    </li>
                    <li>После 75 уровня - древо знаний работает однократно увеличивая количество опыта героя на 1 777 278 601 очко и опыт уходит в отрицательные значения, при этом не имеет значение величина текущего опыта героя (она может лежать в интервале от 1 810 034 207 до 2 147 483 647). Дальнейшее посещение древ знаний неэффективно, т.к. прирост опыта составляет 105 очков опыта. </li>
                </ol>
                <p>Правила изменения очков опыта и первичных навыков:</p>
                <ol>
                    <li>Опыт изменяется в интервале от 0 до 2 147 483 647 и от -2 147 483 648 до -1 очков, теоретически бесконечное количество раз!
                    </li>
                    <li>Значения первичных навыков изменяются от 0 до 127 и от -128 до -1 бесконечное количество раз! При этом значения силы магии и знания у героя становятся равными 1 в интервале значений от -128 до 0, атаки и защиты - 0, а все первичные навыки становятся равными 99 в интервале значений от 100 до 127.</li>
                </ol>
                <p>Имеет смысл набирать уровень героя (хотя это совершенно не игровой показатель, т.к. большее значение имеют очки опыта) выше 88 не уходя сразу в отрицательные значения только в том случае, если необходимо набрать определенное значение первичного навыка.</p>
                <p>Расчет производится следующим образом: смотрите процентную вероятность выпадения первичного навыка у героя, умножаете ее на разницу между текущим и будущим уровнем героя. Если значение получилось больше 256, то вычисляете остаток от деления на 256. Полученное число прибавляете к значению первичного навыка. Погрешность анализа составляет 1 значение первичного навыка.</p>
                <p><b>Рассмотрим пример:</b></p>
                <p>Друид 88 уровня с первичными навыками - 15/19/27/28.<br>Процентная вероятность выпадения первичных навыков составляет 20%/20%/30%/30%.<br>При повышении уровня до 3732 разница равна 3644, поэтому первичные навыки увеличатся на 728/728/1094/1094 или, после вычисления остатков, на 216/216/70/70 и будут равны 0/0/97/98.</p>
            </div>
        </main>
    </div>
</body>

</html>